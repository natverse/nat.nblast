<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a scoring matrix given matching and non-matching sets of neurons — create_scoringmatrix • nat.nblast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a scoring matrix given matching and non-matching sets of neurons — create_scoringmatrix"><meta name="description" content="Calculate a scoring matrix embodying the logarithm of the odds
  that a matching pair of neurite segments come from a structurally related
  rather than random pair of neurons. This function embodies sensible default
  behaviours and is recommended for end users. More control is available by
  using the individual functions listed in See Also."><meta property="og:description" content="Calculate a scoring matrix embodying the logarithm of the odds
  that a matching pair of neurite segments come from a structurally related
  rather than random pair of neurons. This function embodies sensible default
  behaviours and is recommended for end users. More control is available by
  using the individual functions listed in See Also."><meta property="og:image" content="https://natverse.org/nat.nblast/logo.svg"><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/rglWebGL-binding-1.3.1/rglWebGL.js"></script><link href="libs/rglwidgetClass-1.3.1/rgl.css" rel="stylesheet"><script src="libs/rglwidgetClass-1.3.1/rglClass.src.js"></script><script src="libs/rglwidgetClass-1.3.1/utils.src.js"></script><script src="libs/rglwidgetClass-1.3.1/buffer.src.js"></script><script src="libs/rglwidgetClass-1.3.1/subscenes.src.js"></script><script src="libs/rglwidgetClass-1.3.1/shaders.src.js"></script><script src="libs/rglwidgetClass-1.3.1/shadersrc.src.js"></script><script src="libs/rglwidgetClass-1.3.1/textures.src.js"></script><script src="libs/rglwidgetClass-1.3.1/projection.src.js"></script><script src="libs/rglwidgetClass-1.3.1/mouse.src.js"></script><script src="libs/rglwidgetClass-1.3.1/init.src.js"></script><script src="libs/rglwidgetClass-1.3.1/pieces.src.js"></script><script src="libs/rglwidgetClass-1.3.1/draw.src.js"></script><script src="libs/rglwidgetClass-1.3.1/controls.src.js"></script><script src="libs/rglwidgetClass-1.3.1/selection.src.js"></script><script src="libs/rglwidgetClass-1.3.1/rglTimer.src.js"></script><script src="libs/rglwidgetClass-1.3.1/pretty.src.js"></script><script src="libs/rglwidgetClass-1.3.1/axes.src.js"></script><script src="libs/rglwidgetClass-1.3.1/animation.src.js"></script><script src="libs/CanvasMatrix4-1.3.1/CanvasMatrix.src.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nat.nblast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/NBLAST-Clustering.html">NBLAST Clustering</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../SUPPORT.html">Help</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natverse/nat.nblast"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create a scoring matrix given matching and non-matching sets of neurons</h1>
      <small class="dont-index">Source: <a href="https://github.com/natverse/nat.nblast/blob/master/R/smat.r" class="external-link"><code>R/smat.r</code></a></small>
      <div class="d-none name"><code>create_scoringmatrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate a scoring matrix embodying the logarithm of the odds
  that a matching pair of neurite segments come from a structurally related
  rather than random pair of neurons. This function embodies sensible default
  behaviours and is recommended for end users. More control is available by
  using the individual functions listed in <b>See Also</b>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_scoringmatrix</span><span class="op">(</span></span>
<span>  <span class="va">matching_neurons</span>,</span>
<span>  <span class="va">nonmatching_neurons</span>,</span>
<span>  matching_subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  non_matching_subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ignoreSelf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">distbreaks</span>,</span>
<span>  dotprodbreaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  logbase <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  epsilon <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-matching-neurons">matching_neurons<a class="anchor" aria-label="anchor" href="#arg-matching-neurons"></a></dt>
<dd><p>a <code><a href="https://rdrr.io/pkg/nat/man/neuronlist.html" class="external-link">neuronlist</a></code> of matching neurons.</p></dd>


<dt id="arg-nonmatching-neurons">nonmatching_neurons<a class="anchor" aria-label="anchor" href="#arg-nonmatching-neurons"></a></dt>
<dd><p>a <code><a href="https://rdrr.io/pkg/nat/man/neuronlist.html" class="external-link">neuronlist</a></code> of non-matching
neurons.</p></dd>


<dt id="arg-matching-subset-non-matching-subset">matching_subset, non_matching_subset<a class="anchor" aria-label="anchor" href="#arg-matching-subset-non-matching-subset"></a></dt>
<dd><p>data.frames indicating which pairs
of neurons in the two input neuron lists should be used to generate the
matching and null distributions. See details for the default behaviour when
<code>NULL</code>.</p></dd>


<dt id="arg-ignoreself">ignoreSelf<a class="anchor" aria-label="anchor" href="#arg-ignoreself"></a></dt>
<dd><p>a Boolean indicating whether to ignore comparisons of a
neuron against itself (default <code>TRUE</code>).</p></dd>


<dt id="arg-distbreaks">distbreaks<a class="anchor" aria-label="anchor" href="#arg-distbreaks"></a></dt>
<dd><p>a vector specifying the breaks for distances in the
probability matrix.</p></dd>


<dt id="arg-dotprodbreaks">dotprodbreaks<a class="anchor" aria-label="anchor" href="#arg-dotprodbreaks"></a></dt>
<dd><p>a vector specifying the breaks for dot products in the
probability matrix.</p></dd>


<dt id="arg-logbase">logbase<a class="anchor" aria-label="anchor" href="#arg-logbase"></a></dt>
<dd><p>the base to which the logarithm should be taken to produce the
final scores.</p></dd>


<dt id="arg-epsilon">epsilon<a class="anchor" aria-label="anchor" href="#arg-epsilon"></a></dt>
<dd><p>a pseudocount to prevent division by zero when constructing
the log odds ratio in the probability matrix.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>extra arguments to pass to <code><a href="NeuriteBlast.html">NeuriteBlast</a></code> or options
for the call to <code><a href="https://rdrr.io/pkg/plyr/man/mlply.html" class="external-link">mlply</a></code> call that actually iterates over
neuron pairs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix with columns as specified by <code>dotprodbreaks</code> and rows
  as specified by <code>distbreaks</code>, containing log odd scores for neuron
  segments with the given distance and dot product.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>By default <code>create_scoringmatrix</code> will use all neurons in
  <code>matching_neurons</code> to create the matching distribution. This is
  appropriate if all of these neurons are of a single type. If you wish to
  use multiple types of neurons then you will need to specify a
  <code>matching_subset</code> to indicate which pairs of neurons are of the same
  type.</p>
<p>By default <code>create_scoringmatrix</code> will use a random set of pairs from
  <code>non_matching_neurons</code> to create the null distribution. The number of
  random pairs will be equal to the number of matching pairs defined by
  <code>matching_neurons</code> This is appropriate if non_matching_neurons
  contains a large collection of neurons of different types. You may wish to
  set the random seed using <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></code> if you want to ensure that
  exactly the same (pseudo-)random pairs of neurons are used in subsequent
  calls.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="calc_score_matrix.html">calc_score_matrix</a>, <a href="calc_prob_mat.html">calc_prob_mat</a>,
  <a href="calc_dists_dotprods.html">calc_dists_dotprods</a>, <a href="neuron_pairs.html">neuron_pairs</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># calculate scoring matrix</span></span></span>
<span class="r-in"><span><span class="co"># bring in some mushroom body neurons</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/natverse/nat" class="external-link">nat</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">kcs20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># convert the (connected) tracings into dotprops (point and vector)</span></span></span>
<span class="r-in"><span><span class="co"># representation, resampling at 1 micron intervals along neuron</span></span></span>
<span class="r-in"><span><span class="va">fctraces20.dps</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/nat/man/dotprops.html" class="external-link">dotprops</a></span><span class="op">(</span><span class="va">fctraces20</span>, resample<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># we will use both all kcs vs all fctraces20 and fctraces20 vs fctraces20</span></span></span>
<span class="r-in"><span><span class="co"># as random_pairs to make the null distribution</span></span></span>
<span class="r-in"><span><span class="va">random_pairs</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="neuron_pairs.html">neuron_pairs</a></span><span class="op">(</span><span class="va">fctraces20</span><span class="op">)</span>, <span class="fu"><a href="neuron_pairs.html">neuron_pairs</a></span><span class="op">(</span><span class="fu">nat</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/nat/man/kcs20.html" class="external-link">kcs20</a></span>, <span class="va">fctraces20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># you can add .progress='natprogress' if this looks like taking a while</span></span></span>
<span class="r-in"><span><span class="va">smat</span><span class="op">=</span><span class="fu">create_scoringmatrix</span><span class="op">(</span><span class="va">kcs20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">kcs20</span>, <span class="va">fctraces20.dps</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          non_matching_subset<span class="op">=</span><span class="va">random_pairs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now plot the scoring matrix</span></span></span>
<span class="r-in"><span><span class="va">distbreaks</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">smat</span>,<span class="st">'distbreaks'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">distbreaks</span><span class="op">=</span><span class="va">distbreaks</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">distbreaks</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dotprodbreaks</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">smat</span>,<span class="st">'dotprodbreaks'</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Create a function interpolating colors in the range of specified colors</span></span></span>
<span class="r-in"><span><span class="va">jet.colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">colorRampPalette</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"yellow"</span>, <span class="st">"red"</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># 2d filled contour plot of scoring matrix. Notice that the there is a region</span></span></span>
<span class="r-in"><span><span class="co"># at small distances and large abs dot product with the highest log odds ratio</span></span></span>
<span class="r-in"><span><span class="co"># i.e. most indicative of a match rather than non-match</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/filled.contour.html" class="external-link">filled.contour</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">distbreaks</span>, y<span class="op">=</span><span class="va">dotprodbreaks</span>, z<span class="op">=</span><span class="va">smat</span>, col<span class="op">=</span><span class="fu">jet.colors</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  main<span class="op">=</span><span class="st">'smat: log odds ratio'</span>, xlab<span class="op">=</span><span class="st">'distance /um'</span>, ylab<span class="op">=</span><span class="st">'abs dot product'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="create_scoringmatrix-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 3d perspective plot of the scoring matrix</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/persp3d.html" class="external-link">persp3d</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">distbreaks</span>, y<span class="op">=</span><span class="va">dotprodbreaks</span>, z<span class="op">=</span><span class="va">smat</span>, col<span class="op">=</span><span class="fu">jet.colors</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">smat</span>,<span class="fl">20</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>xlab<span class="op">=</span><span class="st">'distance /um'</span>, ylab<span class="op">=</span><span class="st">'abs dot product'</span>, zlab<span class="op">=</span><span class="st">'log odds ratio'</span><span class="op">)</span></span></span>
<p id="rgl5309-aria" hidden>3D plot</p>
<div id="rgl5309" style="width:700px;height:432.632880098888px;" class="rglWebGL html-widget" role="img" aria-labelledby="rgl5309-aria"></div>
<script type="application/json" data-for="rgl5309">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmode":"modulate","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":1,"objects":{"7":{"id":7,"type":"surface","material":{},"vertices":"0","colors":"2","dim":[[21,10]],"centers":"3","normals":"1","ignoreExtent":false,"flipped":true,"flags":32771},"9":{"id":9,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"4","colors":"5","texts":[["distance /um"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"6","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"10":{"id":10,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"7","colors":"8","texts":[["abs dot product"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"9","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"10","colors":"11","texts":[["log odds ratio"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"12","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"5":{"id":5,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"4":{"id":4,"type":"background","material":{},"colors":"13","centers":"14","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"6":{"id":6,"type":"background","material":{"lit":false,"back":"lines"},"colors":"15","centers":"16","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"8":{"id":8,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"17","colors":"18","axes":{"mode":["pretty","pretty","pretty"],"step":[10,0.2000000029802322,2],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.029999971389771,1.029999971389771,1.029999971389771]},"draw_front":true,"flags":32769},"1":{"id":1,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":1,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,100.7774124145508],"modelMatrix":[[0.594437837600708,0,0,-11.88875675201416],[0,9.03598690032959,2.288785457611084,-5.083317279815674],[0,-24.82616996765137,0.8330498337745667,-87.16433715820312],[0,0,0,1]],"projMatrix":[[3.732050895690918,0,0,0],[0,3.732050895690918,0,0],[0,0,-3.863703489303589,-363.2909240722656],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.3420201433256682,0.9396926207859085,0],[0,-0.9396926207859085,0.3420201433256682,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[0.594437837600708,26.41945838928223,2.435674667358398],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[0,40,0.1000000014901161,1,-4.831493377685547,4.930694103240967],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[6,8,7,9,10,11,5],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":700,"height":432.6328800988875,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":210,"type":"VEC3"},{"bufferView":1,"componentType":5126,"count":210,"type":"VEC3"},{"bufferView":2,"componentType":5121,"count":210,"type":"VEC4","normalized":true},{"bufferView":3,"componentType":5126,"count":180,"type":"VEC3"},{"bufferView":4,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":5,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":8,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":11,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":17,"componentType":5126,"count":15,"type":"VEC3"},{"bufferView":18,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":2520,"byteOffset":0},{"buffer":0,"byteLength":2520,"byteOffset":2520},{"buffer":0,"byteLength":840,"byteOffset":5040},{"buffer":0,"byteLength":2160,"byteOffset":5880},{"buffer":0,"byteLength":12,"byteOffset":8040},{"buffer":0,"byteLength":4,"byteOffset":8052},{"buffer":0,"byteLength":12,"byteOffset":8056},{"buffer":0,"byteLength":12,"byteOffset":8068},{"buffer":0,"byteLength":4,"byteOffset":8080},{"buffer":0,"byteLength":12,"byteOffset":8084},{"buffer":0,"byteLength":12,"byteOffset":8096},{"buffer":0,"byteLength":4,"byteOffset":8108},{"buffer":0,"byteLength":12,"byteOffset":8112},{"buffer":0,"byteLength":16,"byteOffset":8124},{"buffer":0,"byteLength":3,"byteOffset":8140},{"buffer":0,"byteLength":4,"byteOffset":8143},{"buffer":0,"byteLength":3,"byteOffset":8147},{"buffer":0,"byteLength":180,"byteOffset":8152},{"buffer":0,"byteLength":4,"byteOffset":8332}],"buffers":[{"byteLength":8336,"bytes":"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\nZr8zhco+o3OwPToQWr+RRwQ/uN8JPvqYJr8eSz8/ULkNPuxmPL+RqSk/JODDPW7AXb9oGfs+\nhJ5RPRq6Zr9zRNw+HPQBPUZuaL/H+NU+6LUzPaeiYr+jCO0+u7INPTDeU7+/aw8/AnOtPR9C\nN7++bjE/Na04PmzqxL5UwWc/H1CMPpQewT1PA3U/bjCGPi/dXj7Gr3A/nAE8PqdF9z67Lls/\nG0gAPsqKKz9yTDs/TX5KPo4J8z5Oj1s/VPKTPsYNmD4v/Wg/5xsOPpGTMj/R9DM/UE3TPoS5\nCj+gbTs/l+/nPrGLDz4/Y2E/aT87PlBvOb8ULCo/NMs4PhJ+Zb8NOM8+jn9NPsVtLb8UKTU/\nzPvwPYcXPjxJNH4/suwzPnR4h750vnI/tLMLPtZPNb/MUTE/lVOBPfw8U783tg8/8RAlPb83\nWr/NdAU/MsKCPUHtWr9frgM/wRBZPee9Pr9PNCo/j1G0PSHjE79Rvk8/tpRRPg+i577ANV4/\nsWaKPgRMhb6MSW0/B+uGPgxLOr1mrXY/pKsrPtzWLT999TY/aqeVPWaqYz9pH+c+fjc0PvNq\nLD/eyTc/neKTPqyBrj4ICGU//6EA///JAP//yQD//8kA///JAP//8QD///EA///xAP//8QD/\n//EA///xAP//8QD///EA///xAP//8QD/5P8A/7v/AP9r/wD/a/8A/wDxDf8AKNb//6EA//+h\nAP//oQD//8kA///JAP//yQD//8kA///JAP//yQD///EA///xAP//8QD///EA///xAP/k/wD/\n5P8A/7v/AP+T/wD/Q/8A/wDxDf8AKNb//6EA//+hAP//oQD//8kA///JAP//8QD//8kA///J\nAP//yQD///EA///xAP//8QD///EA///xAP//8QD/5P8A/7v/AP+T/wD/Q/8A/wDxDf8AAP//\n/6EA//94AP//oQD//6EA//+hAP//yQD//8kA///JAP//yQD//8kA///JAP//yQD///EA///x\nAP//8QD/5P8A/7v/AP+T/wD/Q/8A/wDxDf8AKNb//6EA//94AP//oQD//6EA//+hAP//yQD/\n/6EA//+hAP//yQD//8kA//+hAP//yQD//8kA///xAP//8QD/5P8A/7v/AP+T/wD/Q/8A/wDx\nDf8AKNb//1AA//9QAP//eAD//6EA//+hAP//oQD//6EA//+hAP//oQD//8kA///JAP//yQD/\n/8kA///xAP//8QD///EA/7v/AP+T/wD/Q/8A/wDxDf8AKNb//ygA//9QAP//UAD//3gA//94\nAP//eAD//6EA//+hAP//yQD//8kA///JAP//yQD//8kA///JAP//8QD///EA/7v/AP+T/wD/\nQ/8A/wDxDf8AKNb//wAA//8oAP//UAD//1AA//94AP//eAD//3gA//+hAP//oQD//6EA///J\nAP//yQD//8kA///JAP//yQD///EA/+T/AP+T/wD/Q/8A/wDxDf8AAP///wAA//8AAP//KAD/\n/1AA//9QAP//eAD//3gA//94AP//eAD//6EA//+hAP//oQD//6EA//+hAP//yQD///EA/7v/\nAP+T/wD/Q/8A/wDxDf8AAP///wAA//8AAP//KAD//ygA//9QAP//UAD//3gA//94AP//eAD/\n/6EA//+hAP//oQD//6EA//+hAP//yQD///EA/+T/AP9r/wD/Gv8A/wDxDf8AAP//AADAPpqZ\nGT4k2C5AAACQP5qZGT5ITidAAADgP5qZGT4XoxhAAAAQQJqZGT6kfAlAAAAwQJqZGT6JQgZA\nAABQQJqZGT5VQgJAAABwQJqZGT7Ok/0/AACQQJqZGT5y0Pg/AACwQJqZGT4aTPI/AADQQJqZ\nGT7AN+k/AADwQJqZGT5pMOk/AAAIQZqZGT4N1Oc/AAAYQZqZGT7Q4OI/AAAwQZqZGT5iINQ/\nAABQQZqZGT79qq0/AABwQZqZGT43ZHY/AACQQZqZGT43NL4+AAC0QZqZGT5PIYC+AADcQZqZ\nGT4SWYS/AAAMQpqZGT59eTvAAADAPgAAgD5v5TJAAACQPwAAgD5x2DFAAADgPwAAgD5M0R9A\nAAAQQAAAgD7TowtAAAAwQAAAgD4Y2QZAAABQQAAAgD6TGQdAAABwQAAAgD4AaAhAAACQQAAA\ngD4GWgVAAACwQAAAgD4OxQBAAADQQAAAgD5CqvU/AADwQAAAgD7YQPY/AAAIQQAAgD4syPY/\nAAAYQQAAgD4iq+k/AAAwQQAAgD7cYNI/AABQQQAAgD5spLQ/AABwQQAAgD6TsoU/AACQQQAA\ngD73aeo+AAC0QQAAgD5Lh2i+AADcQQAAgD6sSYy/AAAMQgAAgD4UFT7AAADAPjMzsz5puDNA\nAACQPzMzsz6m4DBAAADgPzMzsz7L6yJAAAAQQDMzsz72PyFAAAAwQDMzsz68KRlAAABQQDMz\n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\nAAAAQAAAwH8AAMB/AACAQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":null},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n#ifdef USE_ENVMAP\nvarying vec3 vReflection;\n#endif\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG) || defined(USE_ENVMAP)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n// USE_ENVMAP implies NEEDS_VNORMAL\n\n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n\n#ifdef USE_ENVMAP\n  vReflection = normalize(reflect(vPosition.xyz/vPosition.w, \n                        normalize(vNormal.xyz/vNormal.w)));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\n#ifdef USE_ENVMAP\nvarying vec3 vReflection;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n\n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    // Simulate two-sided lighting\n    if (n.z < 0.0)\n      n = -n;\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i]) {\n        if (finite[i]) {\n          lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n        } else {\n          lightdir = (mvMatrix * vec4(lightdir, 0.)).xyz;\n        }\n      }\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n\n// These calculations use the definitions from \n// https://docs.gl/gl3/glTexEnv\n\n#ifdef USE_ENVMAP\n    float m = 2.0 * sqrt(dot(vReflection, vReflection) + 2.0*vReflection.z + 1.0);\n    vec4 textureColor = texture2D(uSampler, vReflection.xy / m + vec2(0.5, 0.5));\n#else\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n#endif\n\n#ifdef TEXTURE_rgb\n\n#if defined(TEXMODE_replace) || defined(TEXMODE_decal)\n    textureColor = vec4(textureColor.rgb, lighteffect.a);\n#endif \n\n#ifdef TEXMODE_modulate\n    textureColor = lighteffect*vec4(textureColor.rgb, 1.);\n#endif\n\n#ifdef TEXMODE_blend\n    textureColor = vec4((1. - textureColor.rgb) * lighteffect.rgb, lighteffect.a);\n#endif\n\n#ifdef TEXMODE_add\n    textureColor = vec4(lighteffect.rgb + textureColor.rgb, lighteffect.a);\n#endif\n\n#endif //TEXTURE_rgb\n        \n#ifdef TEXTURE_rgba\n\n#ifdef TEXMODE_replace\n// already done\n#endif \n\n#ifdef TEXMODE_modulate\n    textureColor = lighteffect*textureColor;\n#endif\n\n#ifdef TEXMODE_decal\n    textureColor = vec4((1. - textureColor.a)*lighteffect.rgb) +\n                     textureColor.a*textureColor.rgb, \n                     lighteffect.a);\n#endif\n\n#ifdef TEXMODE_blend\n    textureColor = vec4((1. - textureColor.rgb) * lighteffect.rgb,\n                    lighteffect.a*textureColor.a);\n#endif\n\n#ifdef TEXMODE_add\n    textureColor = vec4(lighteffect.rgb + textureColor.rgb,\n                    lighteffect.a*textureColor.a);\n#endif\n    \n#endif //TEXTURE_rgba\n    \n#ifdef TEXTURE_alpha\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n\n#if defined(TEXMODE_replace) || defined(TEXMODE_decal)\n    textureColor = vec4(lighteffect.rgb, luminance);\n#endif \n\n#if defined(TEXMODE_modulate) || defined(TEXMODE_blend) || defined(TEXMODE_add)\n    textureColor = vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n \n#endif // TEXTURE_alpha\n    \n// The TEXTURE_luminance values are not from that reference    \n#ifdef TEXTURE_luminance\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n\n#if defined(TEXMODE_replace) || defined(TEXMODE_decal)\n    textureColor = vec4(luminance, luminance, luminance, lighteffect.a);\n#endif \n\n#ifdef TEXMODE_modulate\n    textureColor = vec4(luminance*lighteffect.rgb, lighteffect.a);\n#endif\n\n#ifdef TEXMODE_blend\n    textureColor = vec4((1. - luminance)*lighteffect.rgb,\n                        lighteffect.a);\n#endif\n\n#ifdef TEXMODE_add\n    textureColor = vec4(luminance + lighteffect.rgb, lighteffect.a);\n#endif\n\n#endif // TEXTURE_luminance\n \n    \n#ifdef TEXTURE_luminance_alpha\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n\n#if defined(TEXMODE_replace) || defined(TEXMODE_decal)\n    textureColor = vec4(luminance, luminance, luminance, textureColor.a);\n#endif \n\n#ifdef TEXMODE_modulate\n    textureColor = vec4(luminance*lighteffect.rgb, \n                        textureColor.a*lighteffect.a);\n#endif\n\n#ifdef TEXMODE_blend\n    textureColor = vec4((1. - luminance)*lighteffect.rgb,\n                        textureColor.a*lighteffect.a);\n#endif\n\n#ifdef TEXMODE_add\n    textureColor = vec4(luminance + lighteffect.rgb, \n                        textureColor.a*lighteffect.a);\n\n#endif\n\n#endif // TEXTURE_luminance_alpha\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script><span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gregory Jefferis, James Manton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

